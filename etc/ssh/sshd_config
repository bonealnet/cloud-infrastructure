#
# SSHD_CONF="/etc/ssh/sshd_config";
#
# See the sshd_config(5) manpage for details
#

AddressFamily inet

AllowTcpForwarding no

AuthenticationMethods publickey,keyboard-interactive

AuthorizedKeysFile /etc/ssh/authorized_keys/%u

ChallengeResponseAuthentication yes

ClientAliveCountMax 10

ClientAliveInterval 30

DenyUsers boneal

IgnoreRhosts yes

HostbasedAuthentication no

LoginGraceTime 60

LogLevel INFO

MaxAuthTries 1

MaxSessions 5

MaxStartups 10:30:60

PasswordAuthentication no

PermitEmptyPasswords no

PermitRootLogin no

PermitUserEnvironment no

PermitTunnel no

Port 22
Port 24

PrintLastLog yes

PrintMotd no

Protocol 2

PubkeyAuthentication yes

StrictModes yes

TCPKeepAlive no

SyslogFacility AUTH

UseDNS no

UsePAM yes

X11DisplayOffset 10

X11Forwarding yes

#####   SFTP-ONLY USERS (NO SSH)
#
Subsystem sftp internal-sftp -l INFO

Match User jenkins_ssh Address 13.58.94.67 LocalPort 22
	AuthenticationMethods publickey

Match Group sftp_jailed_users LocalPort 22
	AuthenticationMethods publickey
	ChrootDirectory %h
	AllowAgentForwarding no
	X11Forwarding no
	ForceCommand internal-sftp

Match User mcavallo,phanna,rgodithi LocalPort 24
	AuthenticationMethods publickey
	AllowAgentForwarding no
	X11Forwarding no
	ForceCommand internal-sftp
	
#
#	Citation(s)
#
#	Documentation
#		--> https://linux.die.net/man/5/sshd_config
#		--> https://freebsd.org/cgi/man.cgi?sshd_config(5)
#		--> https://debian-administration.org/article/87/Keeping_SSH_access_secure
#
#
#	Discussion
#		--> https://askubuntu.com/questions/2271/how-to-harden-an-ssh-server
#
