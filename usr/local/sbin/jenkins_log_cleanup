#!/bin/bash
#
# JENK_LOG_CLEAN="/usr/local/sbin/jenkins_log_cleanup" && vi "${JENK_LOG_CLEAN}" && chmod 0755 "${JENK_LOG_CLEAN}";
#

# ------------------------------------------------------------
#
# Script must run as root or via sudo
#
if [ "$(id -un)" == "root" ]; then

	# Log all shell output & error output to logfile
	LOGFILE="/var/log/jenkins_log_cleanup_$(date +'%Y%m%d_%H%M%S')";
	exec > >(tee -a "${LOGFILE}" );
	exec 2>&1;


/var/lib/jenkins/jobs/mdev.boneal.net/builds

/var/lib/jenkins/jobs/BNET_cron_process_email_queue.php/builds


PARENT_DIRNAME="/var/lib/jenkins/jobs" && \
FILENAME_PATTERN="" && \
KEEP_NEWER_THAN_DAYS=90 && \
find ${PARENT_DIRNAME} \
-type f \
-name ${FILENAME_PATTERN} \
-mtime +${KEEP_NEWER_THAN_DAYS} \
-exec printf "$(date +'%Y-%m-%d %H:%M:%S') $(whoami)@$(hostname) | " \; \
-exec ls -al '{}' \; \
;


# -exec rm -v -- '{}' \; \

fi;
